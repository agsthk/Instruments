# calibrate_cleandata.py
- First order of business is fixing the zero correction during the UZA active periods
	- I do not need to be applying the calibration offset at all
	- Apply the UZA offset first, then just apply sensitivity
	- Ran into some trouble, turns out it was because it was treating the offset and sensitivity as an array instead of a single value
		- Changed assignment to include .item()
- Based on Megan's suggestion, decided to simply not apply zero offset correction outside of zeroing periods
	- No forward fill or backward fill
	- Does raise the question - how long of gaps in zero should lead me to switch to my temperature based method?
	- Need to decide a cutoff for what should be considered a useable zero - 6 hours?
- Going to check the validity of the cell temperature - offset correlation
	- Using the correlation and cell temperature to define a "Predicted" zero
	- Also creating a column with the fixed offset determined by the calibration
	- Plotting the three different methods against each other - fixed vs using zeros vs predicted by cell temperature
		- For Phase II, I believe that zeroing started 20250127 - prior to that, interpolation not giving useful information
	- Shape wise, there are several dates where the cell temperature predicted offset and true zeros seem to match quite well
		- Some are offset by a different amount
		- May want to check to see if the correlation changes with time? Go back to characterize_zeros.py and color by month maybe?
	- Fixed offset does not look reasonable at all really
		- Removing
	- Visualizing known vs predicted zeros for Thermo and room O3
	- Determining the relative percent difference between the two methods of zeroing
		- Difference isn't too large for 2BTech_205_A
			- Gets up to 40% at times, but mostly less than ~20%
				- For a zero, this is great! Will be even smaller for the actual O3 concentration I bet
		- Thermo is also pretty good
			-  Very small for NO, a bit larger for NO2 which makes sense given the larger denominator for NO
		- This is not as useful as determining a percent change in the final value - moving on to that
	- Visually examining the difference in final measured value using the three different offset methods
		- Plotting with absolute and percent difference (% is pretty useless tbh)
			- For O3, absolute difference is < ~2ppb, mostly <1 ppb, does end up ~3 ppb on 20250327 and 0331, ~4 ppb on 20250328 and 0329
			- Really solid in April! And May! <1 ppb difference always
				- Likely because temperature in B203 not fluctuating as much, I think that's a good sign for applying in January
			- Thermo
				- May, differences are <0.1 ppb!
				- <0.2 ppb April
				- March: <0.3 ppb, mostly way  smaller than that
				- Feb: as high as 0.6 ppb, but mostly lower than that
				- January, up to 0.5 ppb, mostly lower
		- I think I've convinced myself that the temperature correlation works well!
			- Do need some better figures to actually save and show Megan, though
	- Checking instrument temperatures during calibrations
		- Thermo - during 20241216 calibration, instrument temperature was 30.3 - 32.7 C, stabilizing around 32.5 C
			- In April - May, temp is reasonably close to this range, but before, always hotter during Phase II
		- O3 - during 20250115 calibration, temperature 37 - 38 C, steadily ramping up even after calibration stopped
			- Same as Thermo - in April-May, temperature reasonably close, but before always hotter
		- How rapidly are temperatures changing?
		- What about instruments not on TG line? (vent O3)
			- 20250115 calibration, temperature ~36 - 38
			- Out of this range until April
			- Don't have zeros for this, so I have to use the fixed offset even though it is likely inaccurate :(